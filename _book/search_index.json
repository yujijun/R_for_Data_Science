[["rmarkdown.html", "第 4 章 可重复性报告 4.1 什么是Rmarkdown 4.2 markdown 基本语法 4.3 Hello R Markdown 4.4 生成html文档 4.5 生成word文档 4.6 生成pdf文档 4.7 使用方法 4.8 延伸阅读", " 第 4 章 可重复性报告 有时候，我们需要展示和分享我们的数据分析结果给同行、老板或者老师。 那么，为了让老板能快速地的理解我们的分析思路和方法， 最好的方法，就是将分析背景、分析过程、分析结果以及图表等形成报告，让读者能重复和验证我们的结果，确保结论的真实可信。 因此，本章就将介绍如何生成分析报告（可重复性报告）。 4.1 什么是Rmarkdown 4.2 markdown 基本语法 # This is a title # 第一章 （注意 &quot;#&quot; 与 &quot;第一章&quot;之间有空格） ## 第一节 （同上，&quot;##&quot; 与 &quot;第一节&quot;之间有空格） This is a sentence. Now a list begins: - no importance - again - repeat A numbered list: 1. first 2. second __bold__, _italic_, ~~strike through~~ 4.3 Hello R Markdown Rstudio create Rmd file ： File -&gt; New File -&gt; R Markdown. 基本构成（图中绿色括号地方） metadata text code 点击knit（图中红色地方），选择想要输出的文档格式即可。 4.4 生成html文档 希望html文档有章节号、目录或者更好显示表格，可以修改头文件（用下面的内容替换Rmarkdown的头文件） --- title: Habits author: John Doe date: &quot;2021-01-10&quot; output: html_document: df_print: paged toc: yes number_sections: yes --- 4.5 生成word文档 rmarkdown 生成的word功能不是很多，推荐使用officedown , officer, flextable宏包 4.6 生成pdf文档 pdf文档可以插入漂亮的矢量图和优雅的数学公式，所以备受同学们的喜欢。但往往我们写中文的时候，编译不成功。这里就来讲讲如何解决这些问题，推荐阅读这里，或者看这个视频。 Instructions 安装最新版本 R (&gt;3.5) 和 RStudio Desktop (&gt;1.2). 安装pdf查看器，sumatrapdf网站 安装 LaTeX. 然而这个软件会比较大 (e.g. MacTeX is approximate 3.9G). 如果你之前没有安装过 LaTeX，我推荐你安装轻量级的 tinytex. 安装方法如下，打开R，然后再命令行输入: install.packages(&quot;tinytex&quot;) tinytex::install_tinytex(dir = &quot;D:\\\\Tinytex&quot;, force = T) 中途会有两次警告，按 “ 确定 ” 就可以了。 修改头文件，用下面的内容替换Rmarkdown的头文件, 不要修改缩进 --- title: &#39;Going deeper with dplyr&#39; author: &quot;王小二&quot; date: &quot;`r Sys.Date()`&quot; output: pdf_document: latex_engine: xelatex extra_dependencies: ctex: UTF8 number_sections: yes df_print: kable toc: yes classoptions: &quot;hyperref, 12pt, a4paper&quot; --- 4.7 使用方法 4.7.1 插入公式 我相信你已经熟悉了latex语法，那么我们在Rmarkdwon里输入 $$\\frac{\\sum (\\bar{x} - x_i)^2}{n-1}$$，那么实际输出: \\[\\frac{\\sum (\\bar{x} - x_i)^2}{n-1}\\] 也可以使用latex的等式环境， 比如 $$\\Theta = \\begin{pmatrix}\\alpha &amp; \\beta\\\\ \\gamma &amp; \\delta \\end{pmatrix}$$ 输出 \\[ \\Theta = \\begin{pmatrix}\\alpha &amp; \\beta\\\\ \\gamma &amp; \\delta \\end{pmatrix} \\] 4.7.2 插入图片 ```{r, out.width=&#39;35%&#39;, fig.align=&#39;left&#39;, fig.cap=&#39;this is caption&#39;} knitr::include_graphics(&quot;images/R_logo.png&quot;) ``` 图 4.1: this is caption 4.7.3 运行代码 summary(cars) ## speed dist ## Min. : 4.0 Min. : 2.00 ## 1st Qu.:12.0 1st Qu.: 26.00 ## Median :15.0 Median : 36.00 ## Mean :15.4 Mean : 42.98 ## 3rd Qu.:19.0 3rd Qu.: 56.00 ## Max. :25.0 Max. :120.00 4.7.4 表格 ```{r tables-mtcars} knitr::kable(iris[1:5, ], caption = &quot;A caption&quot;) ``` 表 4.1: A caption Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 需要更优美的表格，可参考这里 4.7.5 生成图片 ```{r} plot(pressure) ``` 或者 ```{r, out.width = &#39;85%&#39;, fig.showtext = TRUE} library(tidyverse) library(nycflights13) library(showtext) showtext_auto() flights %&gt;% group_by(dest) %&gt;% summarize( count = n(), dist = mean(distance, na.rm = TRUE), delay = mean(arr_delay, na.rm = TRUE) ) %&gt;% dplyr::filter(delay &gt; 0, count &gt; 20, dest != &quot;HNL&quot;) %&gt;% ggplot(mapping = aes(x = dist, y = delay)) + geom_point(aes(size = count), alpha = 1 / 3) + geom_smooth(se = FALSE) + ggtitle(&quot;这是我的标题&quot;) ``` ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ── ## ✓ ggplot2 3.3.2 ✓ purrr 0.3.4 ## ✓ tibble 3.0.4 ✓ dplyr 1.0.2 ## ✓ tidyr 1.1.2 ✓ stringr 1.4.0 ## ✓ readr 1.4.0 ✓ forcats 0.5.0 ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ── ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() ## Loading required package: sysfonts ## Loading required package: showtextdb ## `summarise()` ungrouping output (override with `.groups` argument) ## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39; Download my_pdf_document.Rmd 4.8 延伸阅读 Markdown tutorial https://www.markdowntutorial.com (10分钟学完) LaTeX tutorial https://www.latex-tutorial.com/quick-start/ Rmarkdown 介绍 https://bookdown.org/yihui/rmarkdown/ Rmarkdown 手册 https://bookdown.org/yihui/rmarkdown-cookbook/ "]]
